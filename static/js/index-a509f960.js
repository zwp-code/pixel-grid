var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&i(e,t,a[t]);return e};import{a as o}from"./axios-c1c8d626.js";import{d,g as c,j as u,r as p,D as h,o as g,P as f,t as m,a0 as y,U as D,J as b,a1 as v,a2 as w,a as V,Z as x,b as j,n as $,B as k,e as C,f as _,w as O,_ as P,a3 as I,F as N,z,h as K,c as A,s as E,q as R}from"./index-7a49a29c.js";import{g as U,e as B}from"./empty-c98ec24e.js";import{h as F}from"./hot-d0a3d9b9.js";import{_ as S}from"./plugin-vue_export-helper-46f75680.js";var J=d({name:"pindou",components:{},props:{},emits:[],setup(e,l){const{proxy:s}=c(),r=u();let i=p({list:[],isloading:!0,searchValue:"",searchData:[],filterValue:[0],filterOptions:[{value:0,label:"全部"},{value:1,label:"低分辨率"},{value:2,label:"中分辨率"},{value:3,label:"高分辨率"},{value:4,label:"动态"},{value:5,label:"静态"}],currentPage:1,total:0});const d={getFrameImg:h((()=>e=>e&&""!==e?`${b()}pindouImg/${e}.png`:U))};let V={search(){if(""===i.searchValue.trim())return s.$message.warning("请输入搜索词");let e=new RegExp(i.searchValue,"i");i.searchData=i.list.filter((a=>e.test(a.data.pindouName)||e.test(a.data.pindouKey)||e.test(a.data.desc)))},handleDownload({pindouKey:e,pindouName:a}){o.get(`${b()}pindou/${e}.json`).then((a=>{let t=a.data;v(JSON.stringify(t),"application/json",e)})).catch((e=>{s.$message.error("下载失败 - "+e)}))},handleCurrentChange(e){i.currentPage=e,V.getData()},getData(){o.get(`${b()}json/pindou${i.currentPage}.json`).then((e=>{i.total=e.data.total,i.list=w(e.data.data,"createAt"),i.isloading=!1})).catch((e=>{s.$message.error(e),i.isloading=!1}))},filterData(e,a,t){let l=new RegExp(i.searchValue,"i");return e.filter((e=>""!==i.searchValue?(l.test(e.data.projectName)||l.test(e.data.desc))&&e.data.width*e.data.height<=a&&e.data.width*e.data.height>t:e.data.width*e.data.height<=a&&e.data.width*e.data.height>t))},filterData2(e,a){let t=new RegExp(i.searchValue,"i");return e.filter((e=>""!==i.searchValue?(t.test(e.data.projectName)||t.test(e.data.desc))&&e.data.tag.includes(a):e.data.tag.includes(a)))},handleFilter(e){if(i.isloading=!0,i.filterValue.length<=0&&(i.filterValue=[0]),i.filterValue.length>1)if(0===i.filterValue[i.filterValue.length-1])i.filterValue=[0];else{let e=i.filterValue.findIndex((e=>0===e));e>=0&&i.filterValue.splice(e,1)}if(i.searchData=[],i.filterValue.includes(0)&&(i.searchData=[...i.searchData,...V.filterData(i.list,4900,36)]),i.filterValue.includes(1)&&(i.searchData=[...i.searchData,...V.filterData(i.list,400,36)]),i.filterValue.includes(2)&&(i.searchData=[...i.searchData,...V.filterData(i.list,1600,400)]),i.filterValue.includes(3)&&(i.searchData=[...i.searchData,...V.filterData(i.list,4900,1600)]),i.filterValue.includes(4)){V.filterData2(i.list,1).forEach((e=>{i.searchData.find((a=>a.id===e.id))||i.searchData.push(e)}))}if(i.filterValue.includes(5)){V.filterData2(i.list,0).forEach((e=>{i.searchData.find((a=>a.id===e.id))||i.searchData.push(e)}))}i.isloading=!1},handleReset(){i.searchValue=""},handleImport({pindouKey:e,pindouName:a}){o.get(`${b()}pindou/${e}.json`).then((t=>{let l=t.data;r.savePindouData({id:e,value:{data:l,label:a}}).then((e=>{if(e){let e=Object.keys(r.pindouMaps).map((e=>({value:e,label:r.pindouMaps[e].label})));s.$utils.cache.pindou.set(JSON.stringify(e)),s.$message.success(s.$t("message.importSucceeded"))}})).catch((e=>{s.$message.error(s.$t("message.importFailed"))}))})).catch((e=>{s.$message.error("下载失败 - "+e)}))}};return g((()=>{V.getData()})),f((()=>{""===i.searchValue.trim()&&(i.searchData=[])})),n((x=n(n({},m(i)),V),a(x,t({Download:y,ArrowDownBold:D}))),d);var x}});const M={class:"full-layout scrollbar routerview flex-center"},q={class:"full-layout flex flex-column","element-loading-background":"#00000000"},T={class:"flex-start searchBox"},Z={class:"input-search"},G={style:{"margin-left":"5px"}},H={key:0,class:"full-layout scrollbar grid-box scrollAuto"},L={class:"frameImg"},Q=["src"],W={class:"info"},X={class:"flex-between",style:{"padding-bottom":"5px"}},Y=["title"],ee={class:"twoline",style:{"font-size":"14px",display:"-webkit-inline-box"}},ae={key:1,class:"full-layout flex-center scrollbar scrollAuto"};var te=S(J,[["render",function(e,a,t,l,s,r){const i=V("Search"),n=V("el-icon"),o=V("el-pagination"),d=V("el-skeleton-item"),c=V("el-skeleton"),u=V("el-image"),p=V("el-tag"),h=V("el-button"),g=V("el-dropdown-item"),f=V("el-dropdown-menu"),m=V("el-dropdown"),y=V("el-divider"),D=V("el-tooltip"),b=V("el-empty"),v=x("loading");return j(),$("div",M,[k((j(),$("div",q,[C("div",T,[C("div",Z,[_(n,null,{default:O((()=>[_(i)])),_:1}),k(C("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=a=>e.searchValue=a),placeholder:"请搜索拼豆色卡",onKeyup:a[1]||(a[1]=P(((...a)=>e.search&&e.search(...a)),["enter"]))},null,544),[[I,e.searchValue]])]),C("button",{class:"pixelButton",onClick:a[2]||(a[2]=(...a)=>e.handleReset&&e.handleReset(...a))},"重 置"),C("div",G,[_(o,{"current-page":e.currentPage,"onUpdate:current-page":a[3]||(a[3]=a=>e.currentPage=a),"page-size":15,background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,total:e.total,onCurrentChange:e.handleCurrentChange},null,8,["current-page","total","onCurrentChange"])])]),!e.list.length&&!e.searchData.length||e.isloading?e.isloading||e.searchData.length&&e.list.length?K("",!0):(j(),$("div",ae,[_(b,{image:B,description:"空空如也","image-size":200},null,8,["image"])])):(j(),$("div",H,[(j(!0),$(N,null,z(e.searchData.length?e.searchData:e.list,(a=>(j(),$("div",{key:a.id,class:"download-item"},[C("div",L,[_(u,{src:e.getFrameImg(a.data.pindouKey),fit:"contain",class:"full-layout"},{placeholder:O((()=>[_(c,{animated:"",class:"full-layout"},{template:O((()=>[_(d,{variant:"image",style:{height:"100%"}})])),_:1})])),_:2},1032,["src"]),a.data.isTop?(j(),$("img",{key:0,src:F,class:"top"},null,8,Q)):K("",!0),""!==a.data.tip?(j(),A(p,{key:1,type:"danger",class:"size"},{default:O((()=>[E(R(a.data.tip),1)])),_:2},1024)):K("",!0)]),C("div",W,[C("div",X,[C("h4",{class:"oneline",title:a.data.pindouName+a.data.pindouKey.toUpperCase()},R(a.data.pindouName+"("+a.data.pindouKey.toUpperCase()+")"),9,Y),_(m,{trigger:"click",size:"small"},{dropdown:O((()=>[_(f,null,{default:O((()=>[_(g,{onClick:t=>e.handleDownload(a.data),icon:"Download"},{default:O((()=>[E(R(e.$t("message.download")),1)])),_:2},1032,["onClick"]),_(g,{onClick:t=>e.handleImport(a.data),icon:"Upload"},{default:O((()=>[E(R(e.$t("message.import")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),default:O((()=>[_(h,{type:"primary",icon:e.ArrowDownBold,size:"small",style:{"margin-left":"5px"}},null,8,["icon"])])),_:2},1024)]),_(y,{"border-style":"dashed","content-position":"left",style:{margin:"5px 0"}},{default:O((()=>[E(R(a.data.createAt),1)])),_:2},1024),_(D,{content:a.data.desc,effect:"light"},{default:O((()=>[C("div",ee,R(a.data.desc),1)])),_:2},1032,["content"])])])))),128))]))])),[[v,e.isloading]])])}],["__scopeId","data-v-724e364a"]]);export{te as default};
