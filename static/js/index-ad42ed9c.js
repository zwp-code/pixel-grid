var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&i(e,t,a[t]);return e};import{a as n}from"./axios-c1c8d626.js";import{d,g as c,j as u,r as p,D as g,o as h,M as f,t as m,N as w,G as y,O as A,P as D,C as b,a as x,J as V,b as v,k as I,L as C,e as j,f as k,w as F,Q as P,R as z,F as N,v as O,h as E,c as R,n as B,l as L}from"./index-0207168a.js";import{u as Q}from"./index.esm-9d210ab7.js";import{g as Y,e as K}from"./empty-6aab73d4.js";import{_ as q}from"./plugin-vue_export-helper-46f75680.js";var S=d({name:"module",components:{},props:{},emits:[],setup(e,l){const{proxy:s}=c(),r=u();let i=p({moduleList:[],isloading:!0,searchValue:"",searchData:[],filterValue:[0],filterOptions:[{value:0,label:"全部"},{value:1,label:"低分辨率"},{value:2,label:"中分辨率"},{value:3,label:"高分辨率"},{value:4,label:"动态"},{value:5,label:"静态"}],currentPage:1,total:0});const d={getFrameImg:g((()=>e=>e&&""!==e?`https://px.zwpyyds.top/moduleImg${e}`:Y))};let x={search(){if(""===i.searchValue.trim())return s.$message.warning("请输入搜索词");i.isloading=!0,x.handleFilter(i.filterValue)},handleDownload({projectId:e,projectName:a,frameImg:t}){n.get(`https://px.zwpyyds.top/project/${e}.json`).then((e=>{let l=e.data;l.frameImg=t,A(JSON.stringify(l),"application/json",a)})).catch((e=>{s.$message.error("下载失败 - "+e)}))},handleCurrentChange(e){i.currentPage=e,x.getData()},getData(){n.get(`https://px.zwpyyds.top/json/module${i.currentPage}.json`).then((e=>{i.total=e.data.total,i.moduleList=D(e.data.data,"createAt"),x.handleFilter(i.filterValue)})).catch((e=>{s.$message.error(e),i.isloading=!1}))},filterData(e,a,t){let l=new RegExp(i.searchValue,"i");return e.filter((e=>""!==i.searchValue?(l.test(e.data.projectName)||l.test(e.data.desc))&&e.data.width*e.data.height<=a&&e.data.width*e.data.height>t:e.data.width*e.data.height<=a&&e.data.width*e.data.height>t))},filterData2(e,a){let t=new RegExp(i.searchValue,"i");return e.filter((e=>""!==i.searchValue?(t.test(e.data.projectName)||t.test(e.data.desc))&&e.data.tag.includes(a):e.data.tag.includes(a)))},handleFilter(e){if(i.isloading=!0,i.filterValue.length<=0&&(i.filterValue=[0]),i.filterValue.length>1)if(0===i.filterValue[i.filterValue.length-1])i.filterValue=[0];else{let e=i.filterValue.findIndex((e=>0===e));e>=0&&i.filterValue.splice(e,1)}if(i.searchData=[],i.filterValue.includes(0)&&(i.searchData=[...i.searchData,...x.filterData(i.moduleList,4900,36)]),i.filterValue.includes(1)&&(i.searchData=[...i.searchData,...x.filterData(i.moduleList,400,36)]),i.filterValue.includes(2)&&(i.searchData=[...i.searchData,...x.filterData(i.moduleList,1600,400)]),i.filterValue.includes(3)&&(i.searchData=[...i.searchData,...x.filterData(i.moduleList,4900,1600)]),i.filterValue.includes(4)){x.filterData2(i.moduleList,1).forEach((e=>{i.searchData.find((a=>a.id===e.id))||i.searchData.push(e)}))}if(i.filterValue.includes(5)){x.filterData2(i.moduleList,0).forEach((e=>{i.searchData.find((a=>a.id===e.id))||i.searchData.push(e)}))}i.isloading=!1},handleReset(){i.searchValue="",i.filterValue=[0],x.handleFilter(i.filterValue)},handleImport(e){n.get(`https://px.zwpyyds.top/project/${e.projectId}.json`).then((a=>{let t=a.data;t.createAt=b(),t.updateAt=t.createAt,t.projectId=Q.v1(),t.tip="新项目",t.isTop=0,t.frameImg=e.frameImg,r.saveProject(t).then((e=>{e&&s.$message.success(s.$t("message.importSucceeded"))})).catch((e=>{s.$message.error(s.$t("message.importFailed"))}))})).catch((e=>{s.$message.error("下载失败 - "+e)}))}};return h((()=>{x.getData()})),f((()=>{""===i.searchValue.trim()&&x.handleFilter(i.filterValue)})),o((V=o(o({},m(i)),x),a(V,t({Download:w,ArrowDownBold:y}))),d);var V}});const U={class:"full-layout scrollbar routerview flex-center"},G={class:"full-layout flex flex-column","element-loading-background":"#00000000"},J={class:"flex-start searchBox"},X={class:"input-search"},W={style:{"margin-left":"5px"}},$={key:0,class:"full-layout scrollbar flex-start flex-warp scrollAuto",style:{"align-content":"flex-start","align-items":"flex-start",gap:"10px",padding:"10px 18px"}},_={class:"frameImg"},T=["src"],H=["src"],M={class:"info"},Z={class:"flex-between",style:{"padding-bottom":"5px"}},ee=["title"],ae={class:"twoline",style:{"font-size":"14px",display:"-webkit-inline-box"}},te={key:1,class:"full-layout flex-center scrollbar scrollAuto"};var le=q(S,[["render",function(e,a,t,l,s,r){const i=x("Search"),o=x("el-icon"),n=x("el-option"),d=x("el-select"),c=x("el-pagination"),u=x("el-tag"),p=x("el-button"),g=x("el-dropdown-item"),h=x("el-dropdown-menu"),f=x("el-dropdown"),m=x("el-divider"),w=x("el-tooltip"),y=x("el-empty"),A=V("loading");return v(),I("div",U,[C((v(),I("div",G,[j("div",J,[j("div",X,[k(o,null,{default:F((()=>[k(i)])),_:1}),C(j("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=a=>e.searchValue=a),placeholder:"请输入搜索词",onKeyup:a[1]||(a[1]=P(((...a)=>e.search&&e.search(...a)),["enter"]))},null,544),[[z,e.searchValue]])]),k(d,{modelValue:e.filterValue,"onUpdate:modelValue":a[2]||(a[2]=a=>e.filterValue=a),placeholder:"请选择分类",size:"large",onChange:e.handleFilter,class:"select","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,multiple:""},{default:F((()=>[(v(!0),I(N,null,O(e.filterOptions,(e=>(v(),R(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),j("button",{class:"pixelButton",onClick:a[3]||(a[3]=(...a)=>e.handleReset&&e.handleReset(...a))},"重 置"),j("div",W,[k(c,{"current-page":e.currentPage,"onUpdate:current-page":a[4]||(a[4]=a=>e.currentPage=a),"page-size":15,background:"",layout:"total, prev, pager, next","hide-on-single-page":!0,total:e.total,onCurrentChange:e.handleCurrentChange},null,8,["current-page","total","onCurrentChange"])])]),e.searchData.length&&!e.isloading?(v(),I("div",$,[(v(!0),I(N,null,O(e.searchData,(a=>(v(),I("div",{key:a.id,class:"download-item"},[j("div",_,[j("img",{src:e.getFrameImg(a.data.frameImg)},null,8,T),a.data.isTop?(v(),I("img",{key:0,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAv9JREFUWEftlk9Ik3EYxz/PNiv7Y2lIzczXQgpStmlIRR3sH0lCRCQRSXToFHXw1DG9diiD6BLSIelQpB1KCoI0og4l7h0aeCj3mkVKYQk5ZW2/eDe0ae+2d2sgQc9p7Pf8+bzP8/09/IRFNlnk+vxbAMpTfhKiW3E4esQf7MlF9zLugPJqD4EGhFegrop/5N7fgGQDcAy4P1dUqVYJjLRkC5ExgFlIebVnQN1vCLolYDRkA5EbgHjlLtENszsZWS4BQKlWHI42wGdXpNkCDAFbLD5VF93wKV/5UZRqF91Ym64dlgDKp50zA8Vv3FiYQG3X3PzkPbDMOrnUix58orzaBPBIdKMpFYQ1QHVFMdHwOHBddONCYgLlKWtB5FLSpCKt4g+2KK82DJSbN0Z043gy/6QjmFO6Um0SGGmOqb+mtIKIsxcoSfFVL4BbQPucj0iz+IOmNv6w9ACxWcheU1TKqz0F9qebq8X5MIWyTXqC0wvP7AGAOYYTwJ4sisdDhFPiN+5kC5B13YTAl6Ibu20BKF95HUqZ2y635gqvkL5PU4lJrW+BV7sCxISXU4u4ymTg3Qc7AANAZcri+REIOTPlqxHd6LcDoGxlrpyEwQJbrjEnh6qU/pG3uQM4OAZ5Ueh224EYFN2osidCr5a8A6UhGM2P5zEB1k3DmyKYyIOxJNvZ9E1YaOk74NHuIjRafpbnW/zvkAt2fI3/nsyDgjAEVkNgjVVYiIhjpwwMB+x1wKOdRbiZFKB4BtwJSy3siI/ihwu6NliEyWXRgxet8qXahNZrd984lISSz7xDm38mBFCRw6KPfswMwLPxCOLoAFbNC2wykhf/shQer0887yHiOr3w7qfVwKyDqtrkwRm9Nu/9d+gzmCOwstdFMDTH+wCX84z0vf+e6oqkfRGpXaX5hJznUdIIqjamelP9C81YDs+LTWF0IrE3QGeqwrNnaQESk6jqsgNE2Yw7VItnsh6nWsmUc4bJJYP0F94mqnolYJgPEduWEYDtrBk4/gf4BVRvAzCOFwfXAAAAAElFTkSuQmCC",class:"top"},null,8,H)):E("",!0),k(u,{type:"success",class:"size"},{default:F((()=>[B(L(a.data.width)+"x"+L(a.data.height),1)])),_:2},1024),""!==a.data.tip?(v(),R(u,{key:1,type:"danger",class:"tip"},{default:F((()=>[B(L(a.data.tip),1)])),_:2},1024)):E("",!0)]),j("div",M,[j("div",Z,[j("h4",{class:"oneline",title:a.data.projectName},L(a.data.projectName),9,ee),k(f,{trigger:"click",size:"small"},{dropdown:F((()=>[k(h,null,{default:F((()=>[k(g,{onClick:t=>e.handleDownload(a.data),icon:"Download"},{default:F((()=>[B(L(e.$t("message.download")),1)])),_:2},1032,["onClick"]),k(g,{onClick:t=>e.handleImport(a.data),icon:"Upload"},{default:F((()=>[B(L(e.$t("message.import")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),default:F((()=>[k(p,{type:"primary",icon:e.ArrowDownBold,size:"small",style:{"margin-left":"5px"}},null,8,["icon"])])),_:2},1024)]),k(m,{"border-style":"dashed","content-position":"left",style:{margin:"5px 0"}},{default:F((()=>[B(L(a.data.createAt),1)])),_:2},1024),k(w,{content:a.data.desc,effect:"light"},{default:F((()=>[j("div",ae,L(a.data.desc),1)])),_:2},1032,["content"])])])))),128))])):e.isloading||e.searchData.length?E("",!0):(v(),I("div",te,[k(y,{image:K,description:"空空如也","image-size":200},null,8,["image"])]))])),[[A,e.isloading]])])}],["__scopeId","data-v-44639382"]]);export{le as default};
